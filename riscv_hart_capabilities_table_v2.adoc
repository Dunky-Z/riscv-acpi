[.text-center]
*RISC-V Hart Capabilities Table (RHCT)*

[.text-center]
#*_DRAFT FOR REVIEW_*#

RISC-V supports many optional features. Different hardware implementations can
support different features. The Operating System will need to know what features
are implemented in the RISC-V Processor a.k.a Hart.

This table provides information about the features implemented in the Hart.
There will be only one table in the system which describes all the harts.

.RISC-V Hart Capabilities Table (RHCT)
|===
|*Field*|*Byte Length*|*Byte Offset*|*Description*

|- Signature|4|0|RHCT signature for the RISC-V Hart Capabilities Table
|- Length|4|4|The length of the table, in bytes, of the entire RHCT
|- Revision|1|8|The revision of the structure corresponding to the signature
field for this table. For the RHCT confirming this revision of the
specification, the revision is 2.
|- Checksum|1|9|The entire table must sum to zero
|- OEMID|6|10|
|- OEM Table ID|8|16|
|- OEM Revision|4|24|
|- Creator ID|4|28|
|- Creator Revision|4|32|
|- Flags|4|36|See Table 2 below.
|- Hart Capability Information Structure[N]|-|40|List of capability Structures. This is per HART. See Table 2. If the harts in the system are identical, then this list will have only one element of boot hart. The OS should assume the same data for all the harts in the system.
|===

.Flags
|===
|*Field Name*|*Bit Length*|*Bit Offset*|*Description*

|- Identical Harts|1|0|A one indicates the system has identical harts with the same capabilities. This means the number of hart capability information structures is 1 and that of the boot Hart ID. The ACPI processor ID will be that of the boot hart. The OS should assume same properties for all the harts in the system.
|- Reserved|31|1|Reserved for future use
|===

.HART Capability Information Structure
|===
|*Field*|*Byte Length*|*Byte Offset*|*Description*

|- Length|2|0|Length of this structure
|- Revision|1|2|1 - for this version
|- Reserved|1|3|
|- ACPI Processor ID|4|4|
|- Instruction Set Supported|4|8|Bits [25:0] encodes the presence of RISC-V standard extensions, which is equivalent to bits [25:0] in RISC-V Machine ISA Register (*misa* CSR). Bits set to one mean the certain extensions of the instruction set are supported on this hart.
|- Misc hart capabilities|4|12|These are capabilities that donâ€™t have an extension assigned. See Table 4 for details.
|-Extension Structures[ n]| n * 4|16|List of Extension Structures. See Table 5.
|===

.Misc Hart capabilities
|===
|*Field Name*|*Bit Length*|*Bit Offset*|*Description*

|- MMU Type|4|0|MMU Type
|- AIA CSR Enabled|1|4|Indicates whether Advanced Interrupt Architecture (AIA) CSRs are implemented.
|- Reserved|27|5|Reserved for future use
|===

.Extension Structure
|===
|*Field*|*Byte Length*|*Byte Offset*|*Description*

|- Extension Type|2|0|See Table 6
|- Attributes|2|2|Attributes or properties of the extension
|===

_Each Extension is assigned a unique 2-byte value. Any new extensions should not use the type value which is already in use. For any new extension, this table should be updated first to reserve the next available number before adding code to avoid the conflicts in future. The unique numbers are assigned using the following rule.

Bits 15:12 - Group

Bits 11:8 - Sub-Group

Bits 7:0 - Extension

.Extension Types
|===
|*Group Name*|*Sub-Group Name*|*Extension Type*|*Extension Name*
.48+|Additional Standard Extension Group 
.5+|I-Extension Sub-Group
|0x0000
|*_Zifenceiv2_*
|0x0001|*_Zihintpausev2_*
|0x0002|*_Zicsr_*
|0x0003|*_Zicmobase_*
|0x0004-0x00ff|Reserved for Future Use
.2+|M-Extension Sub-Group
|0x0100|*_Zmmul_*
|0x0101-0x01ff|Reserved for Future Use
.2+|A-Extension Sub-Group|0x0200|*_Zam_*
|0x0201-0x02ff|Reserved for Future Use
.5+|F-Extension Sub-Group|0x0300|*_Zfinx_*
|0x0301|*_Zhinx_*
|0x0302|*_Zhinxmin_*
|0x0303|*_Zfh_*
|0x0304-0x03ff|Reserved for Future Use
.2+|D-Extension Sub-Group|0x0400|*_Zdinx_*
|0x0401-0x04ff|Reserved for Future Use
|Q-Extension Sub-Group|0x0500-0x05ff|Reserved for Future Use
|L-Extension Sub-Group|0x0600-0x06ff|Reserved for Future Use
.2+|C-Extension Sub-Group|0x0700|*_Zce_*
|0x0701-0x07ff|Reserved for Future Use
.13+|B-Extension Sub-Group|0x0800|*_Zba_*
|0x0801|*_Zbb_*
|0x0802|*_Zbc_*
|0x0803|*_Zbe_*
|0x0804|*_Zbf_*
|0x0805|*_Zbk_*
|0x0806|*_Zbp_*
|0x0807|*_Zbr_*
|0x0808|*_Zbs_*
|0x0809|*_Zbkb - Basic bitmanip instructions for cryptography_*
|0x080a|*_Zbkc - Carryless multiply_*
|0x080b|*_Zbkx - xperm* instructions_*
|0x080c-0x08ff|Reserved for Future Use
.8+|K-Extension Sub-Group|0x0900|*_Zknd - NIST AES decrypt instructions_*
|0x0901|*_Zkne - NIST AES encrypt instructions_*
|0x0902|*_Zknh - NIST SHA2 hash instructions_*
|0x0903|*_Zksed - SM4 encrypt/decrypt instructions_*
|0x0904|*_Zksh - SM3 hash function instructions_*
|0x0905|*_Zkt - Constant time mode indicator_*
|0x0906|*_Zkr - Entropy source._*
|0x0907-0x09ff|Reserved for Future Use
.2+|J-Extension Sub-Group|0x0a00|*_Zjpm_*
|0x0a01-0x0aff|Reserved for Future Use
.2+|T-Extension Sub-Group|0x0b00|*_Ztso_*
|0x0b01-0x0bff|Reserved for Future Use
|P-Extension Sub-Group|0x0c00-0x0cff|Reserved for Future Use
|V-Extension Sub-Group|0x0d00-0x0dff|Reserved for Future Use
|Future Extension sub-groups|0x0e00-0x0fff|Reserved for Future Use
.8+|Supervisor-level Extension Group
.4+|Virtual-Memory Extensions
|0x1000|*_Svnapot_*
|0x1001|*_Svpbmt_*
|0x1002|*_Svinval_*
|0x1003-0x10ff|Reserved for Future Use
.2+|Timer Extension
|0x1100|*_Sstc_*
|0x1101-0x11ff|Reserved for Future Use
.2+|PMU Extension|0x1200|*_Sscof_*
|0x1201-0x12ff|Reserved for Future Use
|Hypervisor-level Extension Group||0x2000-0x2fff|Reserved for Future Use
|Machine-level Extension Group||0x3000-0x3fff|Reserved for Future Use
|Non-Standard Extension Group||0x4000-0x4fff|Reserved for Future Use
|Reserved for future use||0x5000-0xffff|Reserved for Future Use
|===

